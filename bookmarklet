<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>æˆ‘çš„ Bookmarklet åˆ†äº«é </title>
  <style>
    body { font-family: sans-serif; padding: 2em; }
    .bookmarklet {
      display: inline-block;
      padding: 0.7em 1.4em;
      margin: 1em 0;
      background: #448aff;
      color: #fff;
      border-radius: 6px;
      font-size: 1.1em;
      text-decoration: none;
      cursor: grab;
      box-shadow: 0 2px 8px #448aff55;
      transition: background 0.2s;
    }
    .bookmarklet:hover {
      background: #2962ff;
    }
    .tip {
      margin-top: 1em;
      color: #555;
      font-size: 1em;
    }
  </style>
</head>
<body>
  <h1>åˆ†äº« Bookmarklet</h1>
  <a class="bookmarklet" href="javascript:(function(){
  // ========== é„°è¿‘åœ°å€å°ç…§è¡¨ ==========
  const nearbyMap = {
    // æ–°ç•Œ
    "æ²™ç”°":   ["æ²™ç”°", "å¤§åœ", "ç«ç‚­", "é¦¬æ–™æ°´", "çƒæºªæ²™", "é¦¬éå±±", "å¤§åŸ”"],
    "å¤§åœ":   ["å¤§åœ", "æ²™ç”°", "ç«ç‚­", "è»Šå…¬å»Ÿ"],
    "é¦¬éå±±": ["é¦¬éå±±", "çƒæºªæ²™", "é¦¬æ–™æ°´", "è¥¿è²¢", "æ²™ç”°"],
    "çƒæºªæ²™": ["çƒæºªæ²™", "é¦¬éå±±", "é¦¬æ–™æ°´", "æ²™ç”°"],
    "ç«ç‚­":   ["ç«ç‚­", "å¤§åœ", "æ²™ç”°", "é¦¬æ–™æ°´"],
    "é¦¬æ–™æ°´": ["é¦¬æ–™æ°´", "ç«ç‚­", "æ²™ç”°", "é¦¬éå±±", "çƒæºªæ²™"],
    "å¤§åŸ”":   ["å¤§åŸ”", "å¤§åŸ”å¢Ÿ", "å¤ªå’Œ", "æ—æ‘", "ç²‰å¶º", "æ²™ç”°"],
    "å¤ªå’Œ":   ["å¤ªå’Œ", "å¤§åŸ”", "å¤§åŸ”å¢Ÿ"],
    "å…ƒæœ—":   ["å…ƒæœ—", "å¤©æ°´åœ", "æ´ªæ°´æ©‹", "éŒ¦ç”°", "å±å±±", "æœ—å±", "æµæµ®å±±"],
    "å¤©æ°´åœ":["å¤©æ°´åœ", "å…ƒæœ—", "æœ—å±", "æµæµ®å±±", "æ´ªæ°´æ©‹"],
    "èƒç£":   ["èƒç£", "è‘µæ¶Œ", "é’è¡£", "æ¢¨æœ¨æ¨¹", "å¤§çª©å£"],
    "å±¯é–€":   ["å±¯é–€", "å…†åº·", "æ–°å¢Ÿ", "è´è¶ç£", "é¾é–€", "æ´ªæ°´æ©‹"],
    "ç²‰å¶º":   ["ç²‰å¶º", "ä¸Šæ°´", "è¯å’Œå¢Ÿ", "å¤æ´", "å¤§åŸ”"],
    "ä¸Šæ°´":   ["ä¸Šæ°´", "ç²‰å¶º", "å¤æ´", "æ²™é ­è§’"],
    "è¥¿è²¢":   ["è¥¿è²¢", "å°‡è»æ¾³", "æ¸…æ°´ç£", "é¦¬éå±±", "èª¿æ™¯å¶º"],
    "å°‡è»æ¾³": ["å°‡è»æ¾³", "å‘å£", "å¯¶ç³", "èª¿æ™¯å¶º", "åº·åŸ", "è¥¿è²¢"],
    "è‘µæ¶Œ":   ["è‘µæ¶Œ", "èƒç£", "é’è¡£", "çŸ³ç±¬", "å®‰è”­"],
    "é’è¡£":   ["é’è¡£", "è‘µæ¶Œ", "èƒç£"],
    "é›¢å³¶":   ["æ±æ¶Œ", "é•·æ´²", "åªæ´²", "æ„‰æ™¯ç£", "æ¢…çª©", "å¤§æ¾³", "å—ä¸«å³¶"],
    // ä¹é¾
    "æ—ºè§’":   ["æ—ºè§’", "æ²¹éº»åœ°", "å¤ªå­", "ä½æ•¦", "å¤§è§’å’€"],
    "æ²¹éº»åœ°": ["æ²¹éº»åœ°", "æ—ºè§’", "ä½æ•¦", "æŸ¯å£«ç”¸", "å»Ÿè¡—"],
    "ä½æ•¦":   ["ä½æ•¦", "æ²¹éº»åœ°", "å°–æ²™å’€", "æ—ºè§’"],
    "å°–æ²™å’€": ["å°–æ²™å’€", "ä½æ•¦", "æŸ¯å£«ç”¸", "ç´…ç£¡"],
    "ç´…ç£¡":   ["ç´…ç£¡", "é»ƒåŸ”", "å°–æ²™å’€", "åœŸç“œç£", "ä½•æ–‡ç”°"],
    "ä½•æ–‡ç”°": ["ä½•æ–‡ç”°", "åœŸç“œç£", "ç´…ç£¡", "ä¹é¾å¡˜"],
    "ä¹é¾å¡˜": ["ä¹é¾å¡˜", "çŸ³ç¡¤å°¾", "ä½•æ–‡ç”°", "å¤ªå­", "æ–°è’²å´—"],
    "å¤ªå­":   ["å¤ªå­", "æ—ºè§’", "æ·±æ°´åŸ—", "ä¹é¾å¡˜"],
    "æ·±æ°´åŸ—": ["æ·±æ°´åŸ—", "é•·æ²™ç£", "è”æè§’", "çŸ³ç¡¤å°¾", "å¤ªå­"],
    "é•·æ²™ç£": ["é•·æ²™ç£", "æ·±æ°´åŸ—", "è”æè§’"],
    "è”æè§’": ["è”æè§’", "é•·æ²™ç£", "ç¾å­š", "çŸ³ç¡¤å°¾"],
    "è§€å¡˜":   ["è§€å¡˜", "ç‰›é ­è§’", "è—ç”°", "æ²¹å¡˜", "ç§€èŒ‚åª"],
    "ç‰›é ­è§’": ["ç‰›é ­è§’", "è§€å¡˜", "ä¹é¾ç£", "æ–°è’²å´—"],
    "ä¹é¾ç£": ["ä¹é¾ç£", "ç‰›é ­è§’", "æ–°è’²å´—", "å½©è™¹"],
    "æ–°è’²å´—": ["æ–°è’²å´—", "ä¹é¾ç£", "ç‰›é ­è§’", "é»ƒå¤§ä»™", "å•Ÿå¾·"],
    "é»ƒå¤§ä»™": ["é»ƒå¤§ä»™", "é‘½çŸ³å±±", "æ…ˆé›²å±±", "æ–°è’²å´—", "æ¨‚å¯Œ"],
    "é‘½çŸ³å±±": ["é‘½çŸ³å±±", "é»ƒå¤§ä»™", "æ…ˆé›²å±±", "å½©è™¹", "å•Ÿå¾·"],
    "å®‹çš‡è‡º": ["é‘½çŸ³å±±", "å•Ÿå¾·", "åœŸç“œç£", "ä¹é¾åŸ", "å•Ÿå¾·"],
    "å•Ÿå¾·": ["é‘½çŸ³å±±", "æ–°è’²å´—", "å®‹çš‡è‡º"],
    "ä¹é¾åŸ": ["æœªçŸ¥", "æœªçŸ¥", "æœªçŸ¥"],
    // æ¸¯å³¶
    "ä¸­ç’°":   ["ä¸­ç’°", "é‡‘é˜", "ä¸Šç’°", "åŠå±±", "è˜­æ¡‚åŠ"],
    "é‡‘é˜":   ["é‡‘é˜", "ä¸­ç’°", "ç£ä»”", "é‡‘é˜é“"],
    "ç£ä»”":   ["ç£ä»”", "éŠ…é‘¼ç£", "é‡‘é˜", "è·‘é¦¬åœ°", "å¤§å‘"],
    "éŠ…é‘¼ç£":["éŠ…é‘¼ç£", "ç£ä»”", "å¤©å", "è·‘é¦¬åœ°", "å¤§å‘"],
    "å¤©å":   ["å¤©å", "éŠ…é‘¼ç£", "åŒ—è§’"],
    "åŒ—è§’":   ["åŒ—è§’", "ç‚®å°å±±", "å¤©å", "é°‚é­šæ¶Œ"],
    "é°‚é­šæ¶Œ":["é°‚é­šæ¶Œ", "å¤ªå¤", "ç­²ç®•ç£", "åŒ—è§’"],
    "å¤ªå¤":   ["å¤ªå¤", "é°‚é­šæ¶Œ", "è¥¿ç£æ²³"],
    "è¥¿ç£æ²³": ["è¥¿ç£æ²³", "ç­²ç®•ç£", "å¤ªå¤"],
    "ç­²ç®•ç£":["ç­²ç®•ç£", "è¥¿ç£æ²³", "æŸ´ç£"],
    "æŸ´ç£":   ["æŸ´ç£", "ç­²ç®•ç£", "å°è¥¿ç£"],
    "é¦™æ¸¯ä»”": ["é¦™æ¸¯ä»”", "é»ƒç«¹å‘", "é´¨è„·æ´²", "ç”°ç£"],
    "é»ƒç«¹å‘": ["é»ƒç«¹å‘", "é¦™æ¸¯ä»”", "æµ·æ´‹å…¬åœ’"],
    "èµ¤æŸ±":   ["èµ¤æŸ±", "æ·ºæ°´ç£", "çŸ³æ¾³", "å¤§æ½­"],
    "æ·ºæ°´ç£": ["æ·ºæ°´ç£", "æ·±æ°´ç£", "èµ¤æŸ±"],
    "æ·±æ°´ç£": ["æ·±æ°´ç£", "æ·ºæ°´ç£"]
    // ...å¯æŒçºŒæ“´å……
  };


  // ========== å…ˆæ¸…é™¤èˆŠé«˜äº®å’Œå°èˆªUI ==========
  var classes = [
    '.gpt-num-highlight',
    '.gpt-area-highlight',
    '.gpt-multikey-highlight'
  ];
  classes.forEach(function(cls){
    document.querySelectorAll(cls).forEach(function(el){
      var parent = el.parentNode;
      parent.replaceChild(document.createTextNode(el.textContent), el);
      parent.normalize();
    });
  });
  var oldNav = document.getElementById("gpt-nav-ui");
  if(oldNav) oldNav.remove();

  // ========== ä¸»åŠŸèƒ½é¸å–® ==========
  var mode = prompt(
    "ğŸ’©Welcome to Aliz no need issueğŸ’©\n" +
    "è«‹è¼¸å…¥æ•¸å­—ï¼š\n" +
    "1 = å­¸è²»ç¯„åœğŸ’°\n" +
    "2 = å¤šçµ„é—œéµå­—ğŸ”\n" +
    "3 = é„°è¿‘åœ°å€ğŸ“\n" +
    "å…¶å®ƒ = é—œé–‰âŒ"
  );
  if(!["1","2","3"].includes(mode)) return;

  // ========== å–å¾—æ‰€æœ‰æ–‡æœ¬ç¯€é» ==========
  function getTextNodes(node){
    var nodes = [];
    if(node.nodeType === 3){
      nodes.push(node);
    } else if(node.nodeType === 1 && node.childNodes && !/^(script|style|textarea|input)$/i.test(node.tagName)){
      for(var i=0; i<node.childNodes.length; i++)
        nodes = nodes.concat(getTextNodes(node.childNodes[i]));
    }
    return nodes;
  }
  var textNodes = getTextNodes(document.body);
  var highlights = [];
  var infoText = "";

  // ========== 1. å­¸è²»ç¯„åœ ==========
  if(mode === "1"){
    var min = parseFloat(prompt('è«‹è¼¸å…¥æœ€ä½å­¸è²»ï¼ˆä¸å»ºè­°æœå°‹å€‹ä½æ•¸ï¼‰ï¼š', '100'));
    var max = parseFloat(prompt('è«‹è¼¸å…¥æœ€é«˜å­¸è²»ï¼š', '300'));
    if(isNaN(min)||isNaN(max)||min>max) return alert('è¼¸å…¥ç„¡æ•ˆ');
    var numberRegex = /\d+(\.\d+)?/g;
    textNodes.forEach(function(node){
      var text = node.nodeValue;
      var match, lastIndex = 0, parent = node.parentNode, frag = document.createDocumentFragment();
      numberRegex.lastIndex = 0;
      var found = false;
      while((match = numberRegex.exec(text)) !== null){
        var num = parseFloat(match[0]);
        if(num >= min && num <= max){
          found = true;
          frag.appendChild(document.createTextNode(text.slice(lastIndex, match.index)));
          var span = document.createElement('span');
          span.textContent = match[0];
          span.className = 'gpt-num-highlight';
          span.style.background = 'yellow';
          span.style.color = 'black';
          span.style.fontWeight = 'bold';
          frag.appendChild(span);
          highlights.push(span);
          lastIndex = match.index + match[0].length;
        }
      }
      if(found){
        frag.appendChild(document.createTextNode(text.slice(lastIndex)));
        parent.replaceChild(frag, node);
      }
    });
    infoText = "æ•¸å€¼ç¯„åœï¼š" + min + " ~ " + max;
  }


  // ========== 2. å¤šçµ„é—œéµå­— ==========
  if(mode === "2"){
    var input = prompt('è«‹è¼¸å…¥é—œéµå­—ï¼ˆå¯å¤šå€‹ï¼Œç”¨é€—è™Ÿæˆ–ç©ºæ ¼åˆ†éš”ï¼‰ï¼š\nä¾‹å¦‚ï¼šå¹¼ç¨šåœ’,å¹¼å…’');
    if(!input) return;
    var keywords = input.split(/[,ï¼Œ\s]+/).map(function(s){return s.trim();}).filter(Boolean);
    if(!keywords.length) return;
    var regex = new RegExp(keywords.map(k=>k.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1")).join('|'), 'g');
    textNodes.forEach(function(node){
      var text = node.nodeValue;
      var match, lastIndex = 0, parent = node.parentNode, frag = document.createDocumentFragment();
      regex.lastIndex = 0;
      var found = false;
      while((match = regex.exec(text)) !== null){
        found = true;
        frag.appendChild(document.createTextNode(text.slice(lastIndex, match.index)));
        var span = document.createElement('span');
        span.textContent = match[0];
        span.className = 'gpt-multikey-highlight';
        span.style.background = 'gold';
        span.style.color = 'black';
        span.style.fontWeight = 'bold';
        frag.appendChild(span);
        highlights.push(span);
        lastIndex = match.index + match[0].length;
      }
      if(found){
        frag.appendChild(document.createTextNode(text.slice(lastIndex)));
        parent.replaceChild(frag, node);
      }
    });
    infoText = "å¤šé—œéµå­—ï¼š" + keywords.join(", ");
  }

  // ========== 3. é„°è¿‘åœ°å€ ==========
  if(mode === "3"){
    var area = prompt('è«‹è¼¸å…¥ä¸€å€‹åœ°å€åç¨±ï¼ˆå¦‚ï¼šé¦¬éå±± / æ–°è’²å´— / è¥¿ç£æ²³...ï¼‰ï¼š');
    if(!area) return;
    area = area.trim();
    var keywords = [];
    var foundKey = null;
    for(var key in nearbyMap){
      if(key === area){
        keywords = nearbyMap[key];
        foundKey = key;
        break;
      }
    }
    if(!foundKey){
      for(var key in nearbyMap){
        if(nearbyMap[key].includes(area)){
          keywords = nearbyMap[key];
          foundKey = key;
          break;
        }
      }
    }
    if(!foundKey){
      alert('æŠ±æ­‰ï¼Œæœªæœ‰æ­¤åœ°å€çš„é„°è¿‘åœ°å€è³‡æ–™ï¼Œå¯è¯çµ¡é–‹ç™¼è€…æ“´å……ï¼');
      return;
    }
    var regex = new RegExp(keywords.map(function(k){
      return k.replace(/([.*+?^=!:${}()|\[\]\/\\])/g, "\\$1");
    }).join('|'), 'g');
    textNodes.forEach(function(node){
      var text = node.nodeValue;
      var match, lastIndex = 0, parent = node.parentNode, frag = document.createDocumentFragment();
      regex.lastIndex = 0;
      var found = false;
      while((match = regex.exec(text)) !== null){
        found = true;
        frag.appendChild(document.createTextNode(text.slice(lastIndex, match.index)));
        var span = document.createElement('span');
        span.textContent = match[0];
        span.className = 'gpt-area-highlight';
        span.style.background = 'lime';
        span.style.color = 'black';
        span.style.fontWeight = 'bold';
        frag.appendChild(span);
        highlights.push(span);
        lastIndex = match.index + match[0].length;
      }
      if(found){
        frag.appendChild(document.createTextNode(text.slice(lastIndex)));
        parent.replaceChild(frag, node);
      }
    });
    infoText = "åœ°å€ï¼šã€Œ" + area + "ã€åŠé„°è¿‘ (" + keywords.join('ã€') + ")";
  }

  // ========== ç„¡çµæœ ==========
  if(highlights.length === 0){
    alert('æ‰¾ä¸åˆ°ç¬¦åˆçš„çµæœï¼');
    return;
  }

  // ========== å°èˆªUIï¼ˆå³ä¸Šè§’ï¼‰ ==========
  var idx = 0;
  function scrollToHighlight(i){
    highlights.forEach(function(h){ h.style.outline = ''; });
    highlights[i].scrollIntoView({behavior:'smooth',block:'center'});
    highlights[i].style.outline = '2px solid orange';
  }
  scrollToHighlight(idx);

  var navDiv = document.createElement('div');
  navDiv.id = "gpt-nav-ui";
  navDiv.style.position = 'fixed';
  navDiv.style.top = '30px';
  navDiv.style.right = '30px';
  navDiv.style.left = '';
  navDiv.style.bottom = '';
  navDiv.style.background = 'rgba(255,255,200,0.97)';
  navDiv.style.border = '1px solid #aaa';
  navDiv.style.zIndex = 999999;
  navDiv.style.padding = '8px 12px';
  navDiv.style.borderRadius = '6px';
  navDiv.style.boxShadow = '0 2px 8px #ccc';
  navDiv.style.fontFamily = 'sans-serif';
  navDiv.style.fontSize = '15px';
  navDiv.innerHTML = `
    <button id="gpt-prev">ä¸Šä¸€å€‹</button>
    <span id="gpt-counter">1 / ${highlights.length}</span>
    <button id="gpt-next">ä¸‹ä¸€å€‹</button>
    <button id="gpt-close" style="margin-left:10px;">é—œé–‰</button>
    <span style="margin-left:10px;font-size:90%;color:#444;">${infoText}</span>
  `;
  document.body.appendChild(navDiv);
  document.getElementById('gpt-prev').onclick = function(){
    idx = (idx-1+highlights.length)%highlights.length;
    scrollToHighlight(idx);
    document.getElementById('gpt-counter').textContent = `${idx+1} / ${highlights.length}`;
  };
  document.getElementById('gpt-next').onclick = function(){
    idx = (idx+1)%highlights.length;
    scrollToHighlight(idx);
    document.getElementById('gpt-counter').textContent = `${idx+1} / ${highlights.length}`;
  };
  document.getElementById('gpt-close').onclick = function(){
    navDiv.remove();
    highlights.forEach(function(h){
      var parent = h.parentNode;
      parent.replaceChild(document.createTextNode(h.textContent), h);
      parent.normalize();
    });
  };
})();">âœ¨ é»æˆ‘æ‹–åˆ°æ›¸ç±¤åˆ—</a>
  <div class="tip">
    <b>ä½¿ç”¨èªªæ˜ï¼š</b>è«‹ç›´æ¥æŠŠä¸Šé¢çš„è—è‰²æŒ‰éˆ•<strong>æ‹–æ›³åˆ°ç€è¦½å™¨çš„æ›¸ç±¤åˆ—</strong>å³å¯å®‰è£ã€‚
  </div>
</body>
</html>
